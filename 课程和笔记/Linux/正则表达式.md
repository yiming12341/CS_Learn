# 正则表达式

## 语法

正则表达式，是运用简单的方法，来表示复杂的字符串的一种方式。其语法部分主要分为三个部分，元字符，运算符，类。

### 元字符

在正则表达式中，普通字符匹配自身，元字符往往有特殊的含义，常见的元字符如下：

| 元字符    | 含义                               |
| --------- | ---------------------------------- |
| **.**     | **匹配任意的单个字符**             |
| `^`       | **匹配行的开头**                   |
| `$`       | **匹配行的末尾**                   |
| `\<`      | **匹配单词的开头**                 |
| `\>`      | **匹配单词的结尾**                 |
| `[list]`  | **匹配list中的任意字符**           |
| `[^list]` | **匹配不在list中的任意字符**       |
| `()`      | **视为一个单独的单元**             |
| `|`       | **匹配选择之一**                   |
| `\`       | 引用，将元字符解释为普通符号的意义 |

### 运算符

有些时候我们需要重复的一些动作，因此我们可以借助运算符来帮助做这个重复工作

| 运算符  | 含义             |
| ------- | ---------------- |
| `*`     | 匹配0次或者多次  |
| `+`     | 匹配一次或者多次 |
| `?`     | 匹配0次或者一次  |
| `{n}`   | 匹配n次          |
| `{n,}`  | 至少匹配n次      |
| `{0,m}` | 最多匹配m次      |
| `{,m}`  | 最多匹配m次      |
| `{n,m}` | 匹配n到m次       |

### 预定字符类

| 类            | 含义           | 类似于    |
| ------------- | -------------- | --------- |
| ` [:lower:] ` | 小写字母       | a-z       |
| ` [:upper:] ` | 大写字母       | A-Z       |
| ` [:alpha:] ` | 大小写字母     | A-Zz-a    |
| ` [:alnum:] ` | 字母加数字     | 0-9a-zA-Z |
| `[:digit:]`   | 数字           | 0-9       |
| `[:punct:]`   | 标点符号       |           |
| `[:blank:]`   | 空格或者制表符 |           |

## 匹配行和单词

**行**

我们使用`^`来表示匹配行的开头，`$`表示匹配行的末尾

例如：

`^$`表示空行

`^Hello$`表示只含Hello的行

`^Hello`表示以Hello开头的行

`Hello$`表示以Hello结尾的行

**单词**

我们使用`\<`表示单词的开头，`\>`表式单词的结尾。

例如：

`\<k`表示所有以k开头的单词

`\<know\>`表示只匹配know,而不会匹配known之类

**当然为了表示方便，我们也可以使用`\b`来代替`\<`和`\>`**

## 匹配字符

### 基本语法

在正则表达式中，使用**.**来表示除了行的末尾的任意字符。

当我们确定了一些范围之后，我们可以用更加细化的方式来匹配，这时候就需要借助使用`[]`来帮助我们解决这个问题。

`[list]`表示匹配属于list的任意一个字母都可以，`[^list]`表示除了list外，匹配任意一个字符都可以。

### 区域设置

`-`字符，表示一个区间。

因为不同系统的字母排序方式不同。

当我们使用的是C排序的时候，我们可以使用`0-9`和`a-z`和`A-Z`来表示数字，小写字母，大写字母

但是字典排序的方式为`AaBb...Zz`所以我们使用`a-z`时截取的是中间的那一部分。这个需要注意

使用`locale`可以查看排序方式

可以使用下面的方式来将排序方式设为C排序

```bash
export LC_COLLATE=C
export LC_COLLATE=POSIX
```



### 重复使用

上述的工作都只能进行单个的匹配，如果需要重复的匹配，需要使用下面的运算符。这些运算符一般都只是作用于前面的一个字符，如过需要使用多个需要借助`()`将其括起来。

通常`*`表示0个或者多个，`+`表示一个或者多个，`?`表示可以匹配一次或者多次，`{m,n}`表示匹配`[m,n]`次

**最后我们有些时候需要选择，`|`表示匹配哪个都行**，有些时候需要匹配这些符号本身，需要使用`\`来转义



## 实例

Linux中存在一个字典文件，称为words,这里面每一个单词占一行，这个文件一般放在`usr/share/dict/words`但是会因为版本的不同而有所差异。

我们需要查找以qu开头以y结尾的单词

```
 grep '^qu[a-z]*y$' /usr/share/dict/words
```

搜索并查询，有多少个两个字母的命令

```
ls /usr/bin | grep -c '^[a-z]{2}$'
```



